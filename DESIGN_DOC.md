# AIカノジョメーカー（仮）設計書（v0.6.2 - 確定版）

最終更新：2025-07-16

---

## 1. プロジェクト概要

属性や性格などを選択・入力すると、**ChatGPT用プロンプト**と**画像生成用プロンプト（英語）**を自動生成するツール。

**【無料・繰り返し利用・便利さの実現コンセプト】**
本ツールは、APIを直接利用せず、ユーザーが生成されたプロンプトをコピー＆ペーストして外部AIサービス（ChatGPT, 画像生成AIなど）に貼り付けることで結果を得る「プロンプト生成補助ツール」として設計します。これにより、開発・運用コストを最小限に抑え、ユーザーは無料で何度でも利用可能です。プロンプト生成ロジックを高度化することで、コピペの手間以上の価値を提供し、繰り返し利用を促進します。

---

## 2. 機能詳細

### 2.1. UI/UX

*   **選択式＋自由入力対応のUI**:
    *   各選択肢の横に「その他」オプションを設け、選択時に対応する自由入力テキストエリアを表示。
    *   自由入力テキストエリアにはプレースホルダーで入力例を提示。
    *   各項目（例：耳の種類、性格傾向）のラベル横に情報アイコン（`ⓘ`）を配置し、ホバー時に簡単な説明や、画像生成AIにおける表現のヒント（例：「狐耳：`fox ears`」）をツールチップで表示。
*   **カテゴリ別UI（fieldset構成）**:
    *   「外見」「性格・口調」「シチュエーション」「自由記述」の各カテゴリを `<fieldset>` で囲み、視覚的に分かりやすくグループ化。
    *   各 `<fieldset>` には `<legend>` でラベルを付与。
*   **プロンプト生成結果の表示**:
    *   生成されたChatGPT用プロンプトと画像生成用プロンプトを、それぞれ専用のテキストエリアに表示。
    *   テキストエリアは読み取り専用とし、内容が自動で更新されるようにする。
    *   **レイアウト調整**: メインの入力フォームを広く（約60%）、プロンプト表示部分を狭く（約40%）配置し、左右に余白が生まれるように調整。全体で `1:3:1` のようなバランスを目指す。
*   **スライダーによる視覚的調整**:
    *   体の大小、胸の大きさ、性格の度合いなど、数値で表現できる属性はスライダー（HTMLの `<input type="range">`）で直感的に調整可能にする。
    *   スライダーの現在値をリアルタイムで表示。
    *   **スライダーのサイズ**: 全てのスライダーの横幅を、UI全体の約2/3程度に調整し、視覚的なバランスを改善。
*   **カラーピッカーによる色指定**:
    *   目の色、髪色などの色指定項目に、カラーコード（HEX値）で直接色を選択できるカラーピッカー（`<input type="color">`）を追加。
    *   選択肢、自由入力、カラーピッカーのいずれか優先順位の高いものがプロンプトに反映されるようにする。

### 2.2. プロンプト生成ロジック

**【無料・便利さの実現】**：プロンプト生成のコアロジックはJavaScript（クライアントサイド）で実行し、Pythonは初期HTMLファイルの生成と、将来的なデータ管理に特化させます。

*   **ChatGPT用プロンプト（日本語）**:
    *   **キャラ設定**: ユーザーの選択・入力内容、およびスライダーの値を基に、自然な日本語のキャラクター設定文を生成。
        *   例：「狐耳でゴスロリ服を着た、ツンデレ度合いが70%の女の子。一人称は「ボク」で、語尾は「〜だよっ」。今日は朝起こす役目。」
    *   **セリフ出力依頼**:
        *   **指示の簡素化**: `「シチュエーションにあったセリフを日本語と英語でそれぞれ出力してください。」` に変更。
*   **画像プロンプト（英語・参考）**:
    *   **内部変換ロジックの導入**: ユーザーが選択・入力した日本語の属性（例：「狐耳」「ツンデレ」「朝起こす役目」）を、画像生成AIが理解しやすい具体的な英語のキーワードやフレーズに自動変換するロジックをJavaScript内に実装。
        *   例：`{ears}` → `fox ears`
        *   例：`{outfit}` → `gothic lolita dress`
        *   **スライダー値の反映**: スライダーの値に応じて、より具体的な形容詞や数値的な指示に変換。
            *   `{personality}` → `tsundere, [0-100]% tsundere, slightly blushing, annoyed expression` (値に応じて調整)
            *   `{body_size}` → `petite body`, `slender body`, `average body`, `curvy body`, `voluptuous body` (値に応じて調整)
            *   `{breast_size}` → `flat chest`, `small breasts`, `medium breasts`, `large breasts`, `huge breasts` などで反映 (値に応じて調整)
        *   例：`{role}` → `waking up in a bedroom, sunlight through window`
    *   **カラーコードの反映**: カラーピッカーで選択されたHEX値を、画像生成AIが認識できる形式（例：`#FF0000 eyes`, `red eyes`）に変換してプロンプトに含める。
    *   **テンプレート**:
        ```
        A cute anime girl with [ears_translated], wearing [outfit_translated] outfit,
        [body_size_translated], [breast_size_translated], [eye_color_translated] eyes, [hair_color_translated] hair,
        [hair_style_translated] hair style,
        with a [expression_translated] facial expression, [pose_translated] pose, in a scene where she is [role_translated],
        [location_translated], [relationship_translated], [time_of_day_translated],
        [translated_custom], highly detailed, anime style.
        ```
        *   `[translated_custom]`：自由入力欄の内容を簡易的に英語に翻訳（JavaScriptの簡易翻訳機能、またはユーザーが直接英語で入力した場合はそのまま使用）。

### 2.3. ランダム生成機能

*   **ランダム生成ボタン**: クリックすると、各選択項目からランダムに選択肢を選び、自由入力欄もランダムなキーワード（事前に定義したリストから）で埋める。スライダーもランダムな値に設定。カラーピッカーもランダムな色に設定。
*   **ランダム生成の範囲**: 全ての選択項目と、一部の自由入力欄（例：髪型、目元など）を対象とする。ユーザーが入力済みの項目は上書きしないオプションも検討。

### 2.4. コピー機能

*   **コピー用ボタンの実装（Chat用／画像用）**:
    *   各プロンプト表示エリアの横に、ワンクリックで内容をクリップボードにコピーするボタンを配置。
    *   コピー成功時には、ボタンの表示が一時的に「Copied!」などに変化する視覚的フィードバックを提供。

---

## 3. 入力項目一覧（カテゴリ別）

### ‍♀️ 外見（ビジュアル）
| 項目ID | ラベル     | 選択肢（初期）                     | 補足                                     |
|--------|------------|------------------------------------|------------------------------------------|
| ears   | 耳の種類   | 狐耳, 猫耳, うさ耳, なし（＋自由入力） |                                          |
| outfit | 服装       | ゴスロリ, セーラー服, チャイナドレス（＋自由入力） |                                          |
| body_size | 体の大小   | **スライダー（0:小柄〜100:大柄）** | 画像プロンプトに `petite`, `slender`, `average`, `curvy`, `voluptuous` などで反映 |
| breast_size | 胸の大きさ | **スライダー（0:控えめ〜100:豊満）** | 画像プロンプトに `flat chest`, `small breasts`, `medium breasts`, `large breasts`, `huge breasts` などで反映 |
| eye_color | 目の色     | 赤, 青, 緑, 茶, 黒, 金, 銀（＋自由入力） | **カラーピッカー追加**。カラーコード優先 |
| hair_color | 髪色       | 黒, 茶, 金, 銀, 赤, 青, 緑, ピンク（＋自由入力） | **カラーピッカー追加**。カラーコード優先 |
| hair_style | 髪型       | ショート, ボブ, ロング, ポニーテール, ツインテール, お団子, 三つ編み, 編み込み, 外ハネ, 内巻き, ストレート, ウェーブ, カール, アホ毛, 前髪ぱっつん, シースルーバング, アシンメトリー, 姫カット, 刈り上げ, オールバック（＋自由入力） |                                          |
| expression | 表情       | 笑顔, 困り顔, 怒り顔, 無表情, 照れ顔（＋自由入力） |                                          |
| pose       | ポーズ     | 立ち姿, 座り姿, 手を振る, 寝転がる, 走る, 飛び跳ねる, 考える, 驚く, 隠れる, 踊る（＋自由入力） |                                          |

---

###  性格・口調
| 項目ID    | ラベル         | 選択肢（初期）                      | 補足                                     |
|-----------|----------------|-------------------------------------|------------------------------------------|
| personality | 性格傾向       | ツンデレ, ヤンデレ, 甘えんぼ, クール, おっとり（＋自由入力） |                                          |
| personality_level | 性格の度合い | **スライダー（0:控えめ〜100:強調）** | 選択された性格傾向の度合いを調整。ChatGPTプロンプトに「[性格傾向]度合い：[値]%」で反映。ラベルは動的に変更。 |
| tone        | 話し方（語尾） | 〜だよっ, 〜ですの, 〜にゃ, 〜だぞ, 〜かしら（＋自由入力）  |                                          |
| first       | 一人称         | ボク, わたし, 私, 俺, あたし（＋自由入力）         |                                          |
| second      | 二人称（呼称） | あなた, きみ, 〇〇くん, お前, 〇〇さん（＋自由入力）     |                                          |
| emotion_mix | 感情のミックス | **複数選択可**：ツンデレ, ヤンデレ, 甘えんぼ, クール, おっとり, 活発, 無気力, 臆病, 大胆, 好奇心旺盛, 寂しがり屋（＋自由入力） | 複数の性格傾向を組み合わせる |

---

###  シチュエーション
| 項目ID | ラベル         | 選択肢（初期）                         | 補足                                     |
|--------|----------------|----------------------------------------|------------------------------------------|
| role   | 今日の役割     | 朝起こす役目, お弁当を届けに来た, 嫉妬して詰め寄る, 勉強を教えてくれる, 一緒にゲームをする, 料理を作ってくれる, 買い物に付き合う, 秘密を打ち明ける, 励ましてくれる, 叱ってくれる（＋自由入力） |                                          |
| location | 場所・背景     | 教室, 自室, 屋上, カフェ, 公園, 異世界, 図書館, 商店街, 遊園地, 海辺（＋自由入力） |                                          |
| relationship | 関係性       | 幼馴染, 先生, 後輩, 上司, 恋人, 兄妹, 親友, 隣人, 遠い親戚, 宿敵（＋自由入力） |                                          |
| time_of_day | 時間帯       | 朝, 昼, 夕方, 夜, 深夜, 早朝, 正午, 日没, 真夜中, 夜明け（＋自由入力） |                                          |

---

### ✏️ 自由記述
| ID     | ラベル       | 内容                                 |
|--------|--------------|--------------------------------------|
| custom | 自由入力欄   | 細かい設定／背景補足／服装の追加要素など自由に記述 |

---

## 4. 出力プロンプト構成

###  ChatGPT用プロンプト（日本語）
- キャラ設定（耳・服装・体の大小・胸の大きさ・目の色・髪色・髪型・表情・ポーズ・一人称・口調・性格傾向・性格の度合い・感情ミックス・役割・場所・関係性・時間帯・自由記述）
- セリフ出力依頼（シチュエーションにあったセリフを日本語と英語でそれぞれ出力）

###  画像プロンプト（英語・参考）
```
A cute anime girl with [ears_translated], wearing [outfit_translated] outfit,
[body_size_translated], [breast_size_translated], [eye_color_translated] eyes, [hair_color_translated] hair,
[hair_style_translated] hair style,
with a [expression_translated] facial expression, [pose_translated] pose, in a scene where she is [role_translated],
[location_translated], [relationship_translated], [time_of_day_translated],
[translated_custom], highly detailed, anime style.
```

---

## 5. 技術構成

*   **Python（ロジック）**:
    *   初期のHTMLファイルを生成する役割。
    *   将来的に、ユーザーが作成したキャラクター設定の保存・読み込み機能（ローカルファイルベース）や、より複雑なデータ処理が必要になった場合に活用。
*   **HTML/CSS（UI構築）**:
    *   ユーザーインターフェースの構造とデザインを構築。
    *   CSSは、洗練されたモダンなデザインを追求し、直感的で使いやすいレイアウトを実現。
*   **JavaScript（コアロジック）**:
    *   **プロンプト生成の主要ロジック**: ユーザーの入力に基づいて、ChatGPT用および画像生成用プロンプトをリアルタイムで生成・更新。
    *   **UIインタラクション**: 選択肢の変更、自由入力の表示/非表示、ランダム生成、コピー機能、スライダー値のリアルタイム反映、カラーピッカーの値取得など、ユーザー操作に応じた動的なUI制御。
    *   **API不要の理由**: JavaScriptがクライアントサイドでプロンプト生成を完結させるため、外部APIへのリクエストが不要となり、開発・運用コストを大幅に削減。これにより、ユーザーは無料でツールを利用可能。

---

## 6. 無料・繰り返し利用・便利さの実現戦略

*   **無料**:
    *   **APIレス不要**: プロンプト生成は全てクライアントサイドのJavaScriptで完結。外部AIサービスのAPIキーをユーザーに要求せず、ユーザー自身のAI環境で利用してもらう設計。
    *   **サーバーレス**: Pythonは初期HTML生成のみに利用し、Webサーバーを立てる必要がないため、ホスティングコストも最小限に抑えられる。
*   **繰り返し利用**:
    *   **直感的なUI**: ユーザーが迷わず操作できるシンプルなUI設計。
    *   **高速なプロンプト生成**: クライアントサイド処理のため、入力変更に対するプロンプトのリアルタイム更新が高速。
    *   **ランダム生成**: 新しいキャラクターのアイデアを簡単に試せる機能で、飽きずに繰り返し利用を促進。
    *   **スライダーによる微調整**: 視覚的な操作でキャラクターの属性を細かく調整できるため、より理想に近いキャラクターを追求でき、繰り返し利用のモチベーションに繋がる。
    *   **セーブ機能（将来）**: ローカルストレージやファイルダウンロードで設定を保存し、後で再利用可能にする。
*   **便利さ**:
    *   **ワンクリックコピー**: 生成されたプロンプトを簡単にコピーできるボタン。
    *   **画像プロンプトの自動翻訳・具体化**: ユーザーは日本語で入力するだけで、画像生成AIが理解しやすい英語プロンプトが自動生成されるため、AIの知識がなくても高品質な画像を期待できる。
    *   **ライティング補助**: ChatGPT用プロンプトが、AIがセリフを生成しやすいように誘導する構造になっているため、ユーザーはより意図通りの結果を得やすい。

---

## 7. 今後の展望

*   **ボイス（音声）プロンプト生成**:
    *   生成されたセリフを読み上げるための音声合成AI（例：ElevenLabs, CoeFont）向けのプロンプトも生成。キャラクターの声質や話し方を指定できるようにする。
*   **キャラクターシート出力**:
    *   生成されたキャラクター設定をまとめたキャラクターシート（テキストファイルや画像）として出力する機能。創作活動の補助にも。
*   **履歴/お気に入り機能**:
    *   生成したプロンプトの履歴を保存したり、お気に入りの設定をブックマークしたりする機能。
*   **「今日のカノジョ」**:
    *   ランダム生成をさらに強化し、毎日異なるキャラクター設定を提案する機能。日替わりで新しい発見を。
*   **「相性診断」**:
    *   ユーザーの簡単な入力（好きな性格、外見など）から、おすすめのキャラクター設定を提案する機能。
*   **「衣装のレイヤー化」**:
    *   服装をトップス、ボトムス、アクセサリーなどに分けて組み合わせられるようにする。より細かいカスタマイズが可能に。
*   **Webアプリ化**: 将来的にPythonで簡易的なWebサーバーを構築し、ブラウザから直接アクセスできるWebアプリとして提供。

---